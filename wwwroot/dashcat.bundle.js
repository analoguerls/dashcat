/*! For license information please see dashcat.bundle.js.LICENSE.txt */
(()=>{"use strict";function t(t){return t*Math.PI/180}function e(t,e,i){return Math.min(Math.max(t,i),e)}function i(t,e){let i=s(t),a=s(e);return!(t.radius&&i.width!=i.height||e.radius&&a.width!=a.height)&&([i,a]=[i,a].map(s=>((s==i?t:e).radius&&(s.radius=s.width/2,s.x+=s.radius,s.y+=s.radius),s)),t.radius&&e.radius?Math.hypot(i.x-a.x,i.y-a.y)<i.radius+a.radius:t.radius||e.radius?function(t,e){let{x:i,y:a,width:n,height:h}=s(e);do{i-=e.sx||0,a-=e.sy||0}while(e=e.parent);let r=t.x-Math.max(i,Math.min(t.x,i+n)),o=t.y-Math.max(a,Math.min(t.y,a+h));return r*r+o*o<t.radius*t.radius}(t.radius?i:a,t.radius?e:t):i.x<a.x+a.width&&i.x+i.width>a.x&&i.y<a.y+a.height&&i.y+i.height>a.y)}function s(t){let{x:e=0,y:i=0,width:s,height:a,radius:n}=t.world||t;return t.mapwidth&&(s=t.mapwidth,a=t.mapheight),n&&(s=2*n.x,a=2*n.y),t.anchor&&(e-=s*t.anchor.x,i-=a*t.anchor.y),s<0&&(e+=s,s*=-1),a<0&&(i+=a,a*=-1),{x:e,y:i,width:s,height:a}}let a=()=>{};let n,h,r={};function o(t,e){r[t]=r[t]||[],r[t].push(e)}function c(t,...e){(r[t]||[]).map(t=>t(...e))}let l={get:(t,e)=>"_proxy"==e||a};function d(){return h}class u{constructor({spriteSheet:t,frames:e,frameRate:i,loop:s=!0,name:a}){let{width:n,height:h,spacing:r=0,margin:o=0}=t.frame;Object.assign(this,{spriteSheet:t,frames:e,frameRate:i,loop:s,name:a,width:n,height:h,spacing:r,margin:o,isStopped:!1,_f:0,_a:0})}clone(){return new u(this)}start(){this.isStopped=!1,this.loop||this.reset()}stop(){this.isStopped=!0}reset(){this._f=0,this._a=0}update(t=1/60){if(!this.isStopped)if(this.loop||this._f!=this.frames.length-1)for(this._a+=t;this._a*this.frameRate>=1;)this._f=++this._f%this.frames.length,this._a-=1/this.frameRate;else this.stop()}render({x:t,y:e,width:i=this.width,height:s=this.height,context:a=d()}){let n=this.frames[this._f]/this.spriteSheet._f|0,h=this.frames[this._f]%this.spriteSheet._f|0;a.drawImage(this.spriteSheet.image,this.margin+h*this.width+(2*h+1)*this.spacing,this.margin+n*this.height+(2*n+1)*this.spacing,this.width,this.height,t,e,i,s)}}function p(){return new u(...arguments)}let m=/(jpeg|jpg|gif|png|webp)$/,f=/(wav|mp3|ogg|aac)$/,x=/^\//,g=/\/$/,y=new WeakMap,w="",_="";function v(t,e){return new URL(t,e).href}function b(t,e){return[t.replace(g,""),t?e.replace(x,""):e].filter(t=>t).join("/")}function A(t){return t.split(".").pop()}function M(t){let e=t.replace("."+A(t),"");return 2==e.split("/").length?e.replace(x,""):e}let R={},$={},S={};function T(){window.__k||(window.__k={dm:y,u:v,d:S,i:R})}class k{constructor(t=0,e=0,i={}){null!=t.x?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),i._c&&(this.clamp(i._a,i._b,i._d,i._e),this.x=t,this.y=e)}set(t){this.x=t.x,this.y=t.y}add(t){return new k(this.x+t.x,this.y+t.y,this)}subtract(t){return new k(this.x-t.x,this.y-t.y,this)}scale(t){return new k(this.x*t,this.y*t)}normalize(t=this.length()||1){return new k(this.x/t,this.y/t)}dot(t){return this.x*t.x+this.y*t.y}length(){return Math.hypot(this.x,this.y)}distance(t){return Math.hypot(this.x-t.x,this.y-t.y)}angle(t){return Math.acos(this.dot(t)/(this.length()*t.length()))}direction(){return Math.atan2(this.y,this.x)}clamp(t,e,i,s){this._c=!0,this._a=t,this._b=e,this._d=i,this._e=s}get x(){return this._x}get y(){return this._y}set x(t){this._x=this._c?e(this._a,this._d,t):t}set y(t){this._y=this._c?e(this._b,this._e,t):t}}function I(){return new k(...arguments)}class E{constructor(t){return this.init(t)}init(t={}){this.position=I(),this.velocity=I(),this.acceleration=I(),this.ttl=1/0,Object.assign(this,t)}update(t){this.advance(t)}advance(t){let e=this.acceleration;t&&(e=e.scale(t)),this.velocity=this.velocity.add(e);let i=this.velocity;t&&(i=i.scale(t)),this.position=this.position.add(i),this._pc(),this.ttl--}get dx(){return this.velocity.x}get dy(){return this.velocity.y}set dx(t){this.velocity.x=t}set dy(t){this.velocity.y=t}get ddx(){return this.acceleration.x}get ddy(){return this.acceleration.y}set ddx(t){this.acceleration.x=t}set ddy(t){this.acceleration.y=t}isAlive(){return this.ttl>0}_pc(){}}class C extends E{init({width:t=0,height:e=0,context:i=d(),render:s=this.draw,update:a=this.advance,children:n=[],anchor:h={x:0,y:0},opacity:r=1,rotation:c=0,drotation:l=0,ddrotation:u=0,scaleX:p=1,scaleY:m=1,...f}={}){this._c=[],super.init({width:t,height:e,context:i,anchor:h,opacity:r,rotation:c,drotation:l,ddrotation:u,scaleX:p,scaleY:m,...f}),this._di=!0,this._uw(),this.addChild(n),this._rf=s,this._uf=a,o("init",()=>{this.context??=d()})}update(t){this._uf(t),this.children.map(e=>e.update&&e.update(t))}render(){let t=this.context;t.save(),(this.x||this.y)&&t.translate(this.x,this.y),this.rotation&&t.rotate(this.rotation),1==this.scaleX&&1==this.scaleY||t.scale(this.scaleX,this.scaleY);let e=this.width,i=this.height;this.radius&&(e=i=2*this.radius);let s=-e*this.anchor.x,a=-i*this.anchor.y;(s||a)&&t.translate(s,a),this.context.globalAlpha=this.opacity,this._rf(),(s||a)&&t.translate(-s,-a),this.children.map(t=>t.render&&t.render()),t.restore()}draw(){}_pc(){this._uw(),this.children.map(t=>t._pc())}get x(){return this.position.x}get y(){return this.position.y}set x(t){this.position.x=t,this._pc()}set y(t){this.position.y=t,this._pc()}get width(){return this._w}set width(t){this._w=t,this._pc()}get height(){return this._h}set height(t){this._h=t,this._pc()}_uw(){if(!this._di)return;let{_wx:t=0,_wy:e=0,_wo:i=1,_wrot:s=0,_wsx:a=1,_wsy:n=1}=this.parent||{};this._wx=this.x,this._wy=this.y,this._ww=this.width,this._wh=this.height,this.radius&&(this._wrx=this.radius,this._wry=this.radius),this._wo=i*this.opacity,this._wsx=a*this.scaleX,this._wsy=n*this.scaleY,this._wx=this._wx*a,this._wy=this._wy*n,this._ww=this.width*this._wsx,this._wh=this.height*this._wsy,this.radius&&(this._wrx=this.radius*this._wsx,this._wry=this.radius*this._wsy),this._wrot=s+this.rotation;let{x:h,y:r}=function(t,e){let i=Math.sin(e),s=Math.cos(e);return{x:t.x*s-t.y*i,y:t.x*i+t.y*s}}({x:this._wx,y:this._wy},s);this._wx=h,this._wy=r,this._wx+=t,this._wy+=e}get world(){return{x:this._wx,y:this._wy,width:this._ww,height:this._wh,radius:this.radius?{x:this._wrx,y:this._wry}:void 0,opacity:this._wo,rotation:this._wrot,scaleX:this._wsx,scaleY:this._wsy}}set children(t){this.removeChild(this._c),this.addChild(t)}get children(){return this._c}addChild(...t){t.flat().map(t=>{this.children.push(t),t.parent=this,t._pc=t._pc||a,t._pc()})}removeChild(...t){t.flat().map(t=>{(function(t,e){let i=t.indexOf(e);if(-1!=i)return t.splice(i,1),!0})(this.children,t)&&(t.parent=null,t._pc())})}get radius(){return this._r}set radius(t){this._r=t,this._pc()}get opacity(){return this._opa}set opacity(t){this._opa=e(0,1,t),this._pc()}get rotation(){return this._rot}set rotation(t){this._rot=t,this._pc()}advance(t){super.advance(t),this.drotation+=this.ddrotation,this.rotation+=this.drotation}setScale(t,e=t){this.scaleX=t,this.scaleY=e}get scaleX(){return this._scx}set scaleX(t){this._scx=t,this._pc()}get scaleY(){return this._scy}set scaleY(t){this._scy=t,this._pc()}}class W extends C{init({image:t,width:e=(t?t.width:void 0),height:i=(t?t.height:void 0),...s}={}){super.init({image:t,width:e,height:i,...s})}get animations(){return this._a}set animations(t){let e,i;for(e in this._a={},t)this._a[e]=t[e].clone(),i=i||this._a[e];this.currentAnimation=i,this.width=this.width||i.width,this.height=this.height||i.height}playAnimation(t){this.currentAnimation?.stop(),this.currentAnimation=this.animations[t],this.currentAnimation.start()}advance(t){super.advance(t),this.currentAnimation?.update(t)}draw(){if(this.image&&this.context.drawImage(this.image,0,0,this.image.width,this.image.height),this.currentAnimation&&this.currentAnimation.render({x:0,y:0,width:this.width,height:this.height,context:this.context}),this.color){if(this.context.fillStyle=this.color,this.radius)return this.context.beginPath(),this.context.arc(this.radius,this.radius,this.radius,0,2*Math.PI),void this.context.fill();this.context.fillRect(0,0,this.width,this.height)}}}function P(){return new W(...arguments)}let H=/(\d+)(\w+)/;class z extends C{init({text:t="",textAlign:e="",lineHeight:i=1,font:s=d()?.font,...a}={}){t=""+t,super.init({text:t,textAlign:e,lineHeight:i,font:s,...a}),this.context&&this._p(),o("init",()=>{this.font??=d().font,this._p()})}get width(){return this._w}set width(t){this._d=!0,this._w=t,this._fw=t}get text(){return this._t}set text(t){this._d=!0,this._t=""+t}get font(){return this._f}set font(t){this._d=!0,this._f=t,this._fs=function(t){if(!t)return{computed:0};let e=t.match(H),i=+e[1];return{size:i,unit:e[2],computed:i}}(t).computed}get lineHeight(){return this._lh}set lineHeight(t){this._d=!0,this._lh=t}render(){this._d&&this._p(),super.render()}_p(){this._s=[],this._d=!1;let t=this.context,e=[this.text];if(t.font=this.font,e=this.text.split("\n"),this._fw&&e.map(e=>{let i=e.split(" "),s=i.shift(),a=s;i.map(e=>{a+=" "+e,t.measureText(a).width>this._fw&&(this._s.push(s),a=e),s=a}),this._s.push(a)}),!this._s.length&&this.text.includes("\n")){let i=0;e.map(e=>{this._s.push(e),i=Math.max(i,t.measureText(e).width)}),this._w=this._fw||i}this._s.length||(this._s.push(this.text),this._w=this._fw||t.measureText(this.text).width),this.height=this._fs+(this._s.length-1)*this._fs*this.lineHeight,this._uw()}draw(){let t=0,e=this.textAlign,i=this.context;e=this.textAlign||("rtl"==i.canvas.dir?"right":"left"),t="right"==e?this.width:"center"==e?this.width/2|0:0,this._s.map((s,a)=>{i.textBaseline="top",i.textAlign=e,i.fillStyle=this.color,i.font=this.font,this.strokeColor&&(i.strokeStyle=this.strokeColor,i.lineWidth=this.lineWidth??1,i.strokeText(s,t,this._fs*this.lineHeight*a)),i.fillText(s,t,this._fs*this.lineHeight*a)})}}function j(t){let e=t.canvas;t.clearRect(0,0,e.width,e.height)}function B({fps:t=60,clearCanvas:e=!0,update:i=a,render:s,context:n=d(),blur:h=!1}={}){if(!s)throw Error("You must provide a render() function");let r,l,u,p,m,f=0,x=1e3/t,g=1/t,y=e?j:a,w=!0;function _(){if(l=requestAnimationFrame(_),w&&(u=performance.now(),p=u-r,r=u,!(p>1e3))){for(f+=p;f>=x;)c("tick"),m.update(g),f-=x;y(m.context),m.render()}}return h||(window.addEventListener("focus",()=>{w=!0}),window.addEventListener("blur",()=>{w=!1})),o("init",()=>{m.context??=d()}),m={update:i,render:s,isStopped:!0,context:n,start(){this.isStopped&&(r=performance.now(),this.isStopped=!1,requestAnimationFrame(_))},stop(){this.isStopped=!0,cancelAnimationFrame(l)},_frame:_,set _last(t){r=t}},m}new WeakMap;let L,Y={},Z={},F={},K={Enter:"enter",Escape:"esc",Space:"space",ArrowLeft:"arrowleft",ArrowUp:"arrowup",ArrowRight:"arrowright",ArrowDown:"arrowdown"};function X(t=a,e){t._pd&&e.preventDefault(),t(e)}function J(t){let e=K[t.code],i=Y[e];F[e]=!0,X(i,t)}function N(t){let e=K[t.code],i=Z[e];F[e]=!1,X(i,t)}function O(){F={}}function U(t){return!![].concat(t).some(t=>F[t])}function D(){L??=Date.now(),L|=0,L=L+2654435769|0;let t=L^L>>>16;return t=Math.imul(t,569420461),t^=t>>>15,t=Math.imul(t,1935289751),((t^=t>>>15)>>>0)/4294967296}function q(t,e,i=D){return(i()*(e-t+1)|0)+t}function G(t){if(+t==t)return t;let e=[],i=t.split(".."),s=+i[0],a=+i[1],n=s;if(s<a)for(;n<=a;n++)e.push(n);else for(;n>=a;n--)e.push(n);return e}class Q{constructor({image:t,frameWidth:e,frameHeight:i,spacing:s=0,margin:a=0,animations:n}={}){if(!t)throw Error("You must provide an Image for the SpriteSheet");this.animations={},this.image=t,this.frame={width:e,height:i,spacing:s,margin:a},this._f=(t.width-a)/e|0,this.createAnimations(n)}createAnimations(t){let e,i;for(i in t){let{frames:s,frameRate:a,loop:n}=t[i];if(e=[],null==s)throw Error("Animation "+i+" must provide a frames property");[].concat(s).map(t=>{e=e.concat(G(t))}),this.animations[i]=p({spriteSheet:this,frames:e,frameRate:a,loop:n,name:i})}}}const{canvas:V}=function(t,{contextless:e=!1}={}){if(n=document.getElementById(t)||t||document.querySelector("canvas"),e&&(n=n||new Proxy({},l)),!n)throw Error("You must provide a canvas element for the game");return h=n.getContext("2d")||new Proxy({},l),h.imageSmoothingEnabled=!1,c("init"),{canvas:n,context:h}}("game"),tt="https://2830-59439.el-alt.com/dash-cat/",et='"lores-12", sans-serif',it=400,st=30,at=150,nt=600,ht=()=>(Math.random()+1)*Math.PI,rt={drag:.4,lift:.2,speed:-.075,thrust:1,time:0},ot={difficulty:1,difficultyCheck:!1,entropy:ht(),hasFocus:!0,level:1,lives:3,loaded:!1,musicIsMuted:!1,over:!1,running:!1,score:0,scoreHigh:function(t){let e=localStorage.getItem(t);try{e=JSON.parse(e)}catch(t){}return e}("dash-cat-high-score")||0,spawn:300,spawnMin:90,speed:6,speedMax:12,time:0},ct=(t,e)=>e+2*t,lt={gravity:4,ground:304,max:24,power:12,time:0},dt=["You’ve CAT to be KITTEN me!","ME-ouch!","That was a total CAT-astrophe!\nGame over!","Nothing’s im-PAW-sible for this cat!","PURR-fect! It’s the catnip zoomies!","MEOW you’re talking! Tuna is life!","A-MEW-zon Prime delivery: Invincibility!","Art by Shaye Wong • Sound by Nate Reinauer • Programming by Randall Spence","Pawsed"],ut={attract:[],bonuses:[],obstacles:[],sheets:{},sprites:[]},pt=()=>-ot.speed+(ut.cat.isWet?rt.thrust/ot.entropy:0),mt=function(t,e,i){const s=e||q(0,5);let a="",n=null,h=null,r=0,o=!0,c="",l=0;if(t)switch(s){case 0:case 2:h=R["slow-"+(0===s?"1":"2")],r=48,c="slow",l=0===s?148:221;break;case 1:case 4:a=1===s?"idle":"active",n=ut.sheets.small.animations,r=3,c="small",l=40;break;case 3:case 5:ut.obstacles.push(mt(!0,6,32)),h=R[`large-1-${ot.level}`],r=-60,c="large",l=36;break;case 6:h=R[`large-2-${ot.level}`],r=-28,c="",l=40}else switch(s){case 1:if(ot.lives<9){ut.bonuses.push(mt(!1,6)),a="tuna",n=ut.sheets.bonuses.animations,r=-100,c="tuna",l=48;break}o=!1;break;case 3:ut.cat.hasBox?o=!1:(a="idle",n=ut.sheets.box.animations,r=-6,c="box",l=100);break;case 0:case 2:case 4:ut.bonuses.push(mt(!1,6)),a="catnip",n=ut.sheets.bonuses.animations,r=-100,c="catnip",l=48;break;case 6:a="active",n=ut.sheets.tentacle.animations,r=-56,c="",l=47;break;default:o=!1}return!!o&&P({animations:n,dx:-ot.speed,image:h,type:c,update(){a&&this.playAnimation(a),this.dx=pt(),this.advance()},x:nt+l+(i||0),y:304+r})};(function(){let t;for(t=0;t<26;t++)K["Key"+String.fromCharCode(t+65)]=String.fromCharCode(t+97);for(t=0;t<10;t++)K["Digit"+t]=K["Numpad"+t]=""+t;window.addEventListener("keydown",J),window.addEventListener("keyup",N),window.addEventListener("blur",O)})(),V.height=it,V.width=nt,_=tt,function(t){w=t}(tt),function(...t){return T(),Promise.all(t.map(t=>{let e=A([].concat(t)[0]);return e.match(m)?(i=t,T(),new Promise((t,e)=>{let s,a,n;if(s=b(w,i),R[s])return t(R[s]);a=new Image,a.onload=function(){n=v(s,window.location.href),R[M(i)]=R[s]=R[n]=this,c("assetLoaded",this,i),t(this)},a.onerror=function(){e("Unable to load image "+s)},a.src=s})):e.match(f)?function(t){return new Promise((e,i)=>{let s,a,n,h,r=t;var o;return s=new Audio,a={wav:(o=s).canPlayType('audio/wav; codecs="1"'),mp3:o.canPlayType("audio/mpeg;"),ogg:o.canPlayType('audio/ogg; codecs="vorbis"'),aac:o.canPlayType("audio/aac;")},(t=[].concat(t).reduce((t,e)=>t||(a[A(e)]?e:null),0))?(n=b(_,t),$[n]?e($[n]):(s.addEventListener("canplay",function(){h=v(n,window.location.href),$[M(t)]=$[n]=$[h]=this,c("assetLoaded",this,t),e(this)}),s.onerror=function(){i("Unable to load audio "+n)},s.src=n,void s.load())):i("cannot play any of the audio formats provided "+r)})}(t):function(t){let e,i;return T(),e=b("",t),S[e]?Promise.resolve(S[e]):fetch(e).then(t=>{if(!t.ok)throw t;return t.clone().json().catch(()=>t.text())}).then(s=>(i=v(e,window.location.href),"object"==typeof s&&y.set(s,i),S[M(t)]=S[e]=S[i]=s,c("assetLoaded",s,t),s))}(t);var i}))}("attract.mp3","background-1.png","bonuses.mp3","bonuses.png","box.png","cat.png","catnip.mp3","controls.png","crash.mp3","death.mp3","ground-1.png","jump.mp3","large-1.png","large-1-1.png","large-2-1.png","level-1.mp3","meow.mp3","slow-1.mp3","slow-1.png","slow-2.png","small-1.mp3","small-1.png","start.png","tentacle.png","title.png","victory.mp3","widget.png").then(()=>{const e={height:148,image:R[`background-${ot.level}`],type:"background",width:600,y:252},s=(t,e)=>{ut.sheets[t]=function(){return new Q(...arguments)}(e)},a=(t,e={})=>P({...t,...e}),n=t=>function(){return new z(...arguments)}(t),h={height:53,image:R[`ground-${ot.level}`],type:"ground",width:1200,y:307},r=()=>{ot.attract.stop(),$.attract.pause(),$.attract.currentTime=0,ot.loaded&&(ot.over?(rt.thrust=1,ot.difficulty=1,ot.difficultyCheck=!1,ot.entropy=ht(),ot.level=1,ot.lives=3,ot.over=!1,ot.running=!0,ot.score=0,ot.spawn=300,ot.speed=6,ut.lives.updateText(ot.lives),ut.message.text="",ut.score.updateText(),rt.time=0,ot.musicIsPlaying=!0,ot.time=0,lt.ground=304,lt.time=0,$[`level-${ot.level}`].currentTime=0,!ot.musicIsMuted&&ot.hasFocus&&$[`level-${ot.level}`].play(),ut.bonuses=[],ut.cat.animations=ut.sheets.cat.animations,ut.cat.hasBox=0,ut.cat.hasZoomies=0,ut.cat.height=ut.sheets.cat.frame.height,ut.cat.isWet=!1,ut.cat.width=ut.sheets.cat.frame.width,ut.cat.y=lt.ground,ut.credits.text="",ut.obstacles=[],ut.widget.x=nt-st,ut.widget.y=it-at,ot.loop.start()):ot.running?(ut.message.text=dt[8],ot.paused=!0):ot.running||(ut.message.text="",ot.paused=!1,ot.running=!0,ot.loop.start(),ot.musicIsMuted||($[`level-${ot.level}`].loop=!0,$[`level-${ot.level}`].play())))},o={Enter:()=>r(),Escape:()=>r(),KeyB:()=>!ut.cat.hasBox&&ut.bonuses.push(mt(!1,3)),KeyC:()=>!ut.cat.hasZoomies&&ut.bonuses.push(mt(!1,2)),KeyL:()=>ut.obstacles.push(mt(!0,3)),KeyM:()=>{ot.musicIsMuted?(ot.musicIsMuted=!1,$[`level-${ot.level}`].loop=!0,$[`level-${ot.level}`].play()):(ot.musicIsMuted=!0,$[`level-${ot.level}`].pause())},KeyS:()=>ut.obstacles.push(mt(!0,1)),KeyT:()=>ut.bonuses.push(mt(!1,1)),KeyW:()=>ut.obstacles.push(mt(!0,2)),NumpadEnter:()=>r()},c=function(){setTimeout(()=>{ot.over&&(ot.attract.start(),!ot.musicIsMuted&&ot.hasFocus&&$.attract.play())},12e3)},l=t=>ut.attract.push(t),d=t=>ut.sprites.push(t);ot.loaded=!0,s("bonuses",{animations:{box:{frameRate:10,frames:[4,5]},catnip:{frameRate:10,frames:[2,3]},idle:{frameRate:0,frames:[6]},tuna:{frameRate:10,frames:[0,1]}},frameHeight:36,frameWidth:42,image:R.bonuses}),s("box",{animations:{"fall-1":{frameRate:10,frames:[16,17,18,19]},"fall-2":{frameRate:10,frames:[12,13]},idle:{frameRate:5,frames:[0,1,2]},"jump-1":{frameRate:10,frames:[14,15]},"jump-2":{frameRate:0,frames:[11]},"run-1":{frameRate:10,frames:[7,8,9,10]},"run-2":{frameRate:10,frames:[3,4,5,6]},"wet-1":{frameRate:10,frames:[7,8,9,10]},"wet-2":{frameRate:10,frames:[3,4,5,6]},"zoomie-fall-1":{frameRate:20,frames:[16,17,18,19]},"zoomie-fall-2":{frameRate:20,frames:[12,13]},"zoomie-jump-1":{frameRate:20,frames:[14,15]},"zoomie-jump-2":{frameRate:0,frames:[11]},"zoomie-run-1":{frameRate:20,frames:[7,8,9,10]},"zoomie-run-2":{frameRate:20,frames:[3,4,5,6]},"zoomie-wet-1":{frameRate:20,frames:[7,8,9,10]},"zoomie-wet-2":{frameRate:20,frames:[3,4,5,6]}},frameHeight:78,frameWidth:100,image:R.box}),s("cat",{animations:{dead:{frameRate:0,frames:[20]},fall:{frameRate:10,frames:[6,7]},idle:{frameRate:5,frames:[0,1]},jump:{frameRate:0,frames:[18]},run:{frameRate:10,frames:[2,3,4,5]},wet:{frameRate:10,frames:[8,9]},"zoomie-fall":{frameRate:30,frames:[14,15]},"zoomie-jump":{frameRate:0,frames:[19]},"zoomie-run":{frameRate:30,frames:[10,11,12,13]},"zoomie-wet":{frameRate:30,frames:[16,17]}},frameHeight:52,frameWidth:75,image:R.cat}),s("small",{animations:{active:{frameRate:5,frames:[1,2]},idle:{frameRate:0,frames:[0]}},frameHeight:45,frameWidth:40,image:R[`small-${ot.level}`]}),s("tentacle",{animations:{active:{frameRate:5,frames:[0,1]},attract:{frameRate:5,frames:[1,0]},idle:{frameRate:0,frames:[0]}},frameHeight:104,frameWidth:47,image:R.tentacle}),s("title",{animations:{active:{frameRate:5,frames:[0,1]}},frameHeight:97,frameWidth:377,image:R.title}),l(a(e,{x:0})),l(a(h,{x:0})),l(a({animations:ut.sheets.cat.animations,type:"cat",update(){this.playAnimation("idle"),this.advance()},x:266,y:lt.ground})),l(n({color:"#232323",font:`20px ${et}`,text:"Collect these",x:25,y:180})),l(a({animations:ut.sheets.tentacle.animations,type:"tentacle",update(){this.playAnimation("active"),this.advance()},x:20,y:lt.ground-56})),l(a({animations:ut.sheets.bonuses.animations,type:"catnip",update(){this.playAnimation("catnip"),this.advance()},x:22,y:lt.ground-90})),l(a({animations:ut.sheets.tentacle.animations,type:"tentacle",update(){this.playAnimation("attract"),this.advance()},x:110,y:lt.ground-56})),l(a({animations:ut.sheets.bonuses.animations,type:"tuna",update(){this.playAnimation("tuna"),this.advance()},x:112,y:lt.ground-90})),l(a({animations:ut.sheets.box.animations,type:"box",update(){this.playAnimation("idle"),this.advance()},x:40,y:lt.ground-6})),l(n({color:"#232323",font:`20px ${et}`,text:"Avoid these",x:435,y:180})),l(a({image:R["slow-1"],type:"water",x:420,y:lt.ground+50})),l(a({image:R["large-1"],type:"large",x:490,y:lt.ground-60})),l(a({animations:ut.sheets.small.animations,type:"small",update(){this.playAnimation("active"),this.advance()},x:420,y:lt.ground+3})),l(a({image:R.start,type:"start",x:204,y:lt.ground-66})),l(a({image:R.controls,type:"controls",x:240,y:120})),l(n({anchor:{x:.5,y:.5},color:"#232323",font:`20px ${et}`,text:"Jump",textAlign:"center",x:300,y:106})),l(n({anchor:{x:.5,y:.5},color:"#232323",font:`20px ${et}`,text:"Fall faster",textAlign:"center",x:300,y:212})),l(a({animations:ut.sheets.title.animations,type:"title",update(){this.playAnimation("active"),this.advance()},x:112,y:20})),ot.attract=B({render:()=>ut.attract.map(t=>t.render()),update:()=>ut.attract.map(t=>t.update())}),ot.attract.start(),d(a(e,{dx:-.25,update(){this.x<-600&&(this.x=ct(600,this.x)),this.advance()},x:0})),d(a(e,{dx:-.25,update(){this.x<-600&&(this.x=ct(600,this.x)),this.advance()},x:600})),d(a(h,{dx:-ot.speed,update(){this.dx=pt(),this.x<-1200&&(this.x=ct(1200,this.x)),this.advance()},x:0})),d(a(h,{dx:-ot.speed,update(){this.dx=pt(),this.x<-1200&&(this.x=ct(1200,this.x)),this.advance()},x:1200})),d(a({animations:ut.sheets.bonuses.animations,update(){this.playAnimation("tuna"),this.advance()},x:12,y:6})),ut.lives=n({color:"#232323",font:`24px ${et}`,text:`× ${ot.lives}`,updateText(){this.text=`× ${ot.lives}`},x:60,y:15}),d(ut.lives),d(a({animations:ut.sheets.bonuses.animations,update(){ut.cat.hasZoomies?this.playAnimation("catnip"):this.playAnimation("idle"),this.advance()},x:100,y:4})),d(a({animations:ut.sheets.bonuses.animations,update(){this.playAnimation(ut.cat.hasBox?"box":"idle"),this.advance()},x:145,y:2})),d(a({animations:ut.sheets.bonuses.animations,update(){this.playAnimation(2===ut.cat.hasBox?"box":"idle"),this.advance()},x:185,y:2})),ut.score=n({anchor:{x:1,y:0},color:"#232323",font:`24px ${et}`,text:`${ot.score} / ${ot.scoreHigh}`,updateText(){var t,e;this.text=`${ot.score} / ${ot.score>ot.scoreHigh?ot.score:ot.scoreHigh}`,ot.over&&ot.score>ot.scoreHigh&&(ot.scoreHigh=ot.score,t="dash-cat-high-score",null==(e=ot.score)?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(e)))},x:588,y:12}),d(ut.score),ut.message=n({anchor:{x:.5,y:.5},color:"#232323",font:`24px ${et}`,hasMessage:0,text:"",textAlign:"center",update(){this.hasMessage>0&&(this.hasMessage-=1,0===this.hasMessage&&(this.text=""))},updateText(t){this.hasMessage=360,this.text=t},x:300,y:it/3}),d(ut.message),ut.cat=a({animations:ut.sheets.cat.animations,hasBox:0,hasZoomies:0,isJumping:!1,isWet:!1,type:"cat",update(){let e="",i="";this.hasBox&&(i=`-${this.hasBox}`),this.hasZoomies>0&&(this.hasZoomies-=1,0===this.hasZoomies?($.catnip.pause(),ut.message.text="",ut.widget.dx=rt.speed):e="zoomie-"),U("arrowup")||U("space")?(lt.time+=1,lt.time<lt.max&&(this.playAnimation(`${e}jump${i}`),this.rotation=t(-15),this.y-=lt.power),this.isJumping||(this.isJumping=!0,$.jump.play())):(this.playAnimation(`${e}fall${i}`),this.rotation=0,lt.time=lt.max),this.y<lt.ground?this.y+=Math.min(lt.gravity*(U("arrowdown")?2:1),lt.ground-this.y):this.y===lt.ground&&(this.isJumping=!1,this.playAnimation(e+(this.isWet?"wet":"run")+i),lt.time=0),this.advance()},x:100,y:lt.ground}),d(ut.cat),ut.widget=a({dx:rt.speed,float:0,image:R.widget,update(){rt.time+=1,rt.time<=100?(this.rotation=t(5),this.y+=rt.drag):rt.time<=300?(this.rotation=t(-5),this.y-=rt.lift):rt.time=0,i(this,ut.cat)&&(ot.over=!0,ot.score+=1e3,ot.score+=100*ot.lives,$.catnip.pause(),ut.message.text=dt[3],ut.credits.text=dt[7],ut.score.updateText(),ot.musicIsMuted||($[`level-${ot.level}`].pause(),ot.musicIsPlaying=!1),$.victory.play(),c(),ot.loop.stop()),this.x>567&&(this.x=567),this.advance()},x:nt-st,y:it-at}),d(ut.widget),ut.credits=n({anchor:{x:.5,y:.5},color:"#fff",font:`12px ${et}`,text:"",textAlign:"center",x:300,y:393}),d(ut.credits),ot.loop=B({render(){ut.sprites.map(t=>t.render()),ut.bonuses.map(t=>t.render()),ut.obstacles.map(t=>t.render())},update(){if(ut.sprites.map(t=>t.update()),ot.time+=1,ot.time%60==0&&(ot.score+=ut.cat.hasZoomies?3:1,ut.score.updateText()),ot.time%ot.spawn===0&&ut.obstacles.push(mt(!0)),ot.time%Math.trunc((ot.spawn+ot.difficulty)*ot.entropy)===0){const t=mt(!1);t&&ut.bonuses.push(t)}ot.paused&&(ot.running=!1,ot.loop.stop(),ot.musicIsMuted||$[`level-${ot.level}`].pause()),ut.bonuses.forEach((t,e)=>{if(t.update(),i(ut.cat,t))switch(t.type){case"box":$.bonuses.play(),lt.ground=276,ut.cat.animations=ut.sheets.box.animations,ut.cat.hasBox=2,ut.cat.height=ut.sheets.box.frame.height,ut.cat.width=ut.sheets.box.frame.width,ut.cat.y=lt.ground,ut.message.updateText(dt[6]),ut.bonuses.splice(e,1);break;case"catnip":$.bonuses.play(),$.catnip.currentTime=0,$.catnip.loop=!0,$.catnip.play(),ut.cat.hasZoomies=300,ut.message.updateText(dt[4]),ut.widget.dx=rt.speed*ot.entropy,ut.bonuses.splice(e,1);break;case"tuna":ot.lives<9&&($.meow.play(),ot.lives+=1,ut.lives.updateText(ot.lives),ut.message.updateText(dt[5]),ut.bonuses.splice(e,1))}else t.x+t.width<0&&ut.bonuses.splice(e,1)}),ut.obstacles.forEach((t,e)=>{t.update(),t.type&&i(ut.cat,t)?"slow"===t.type?(ut.widget.dx=rt.thrust,ut.cat.isWet=!0,$[`slow-${ot.level}`].play()):ut.cat.hasBox?(ut.cat.hasBox-=1,0===ut.cat.hasBox&&(lt.ground=304,ut.cat.animations=ut.sheets.cat.animations,ut.cat.height=ut.sheets.cat.frame.height,ut.cat.width=ut.sheets.cat.frame.width,ut.cat.y=lt.ground),"large"===t.type?ut.obstacles.splice(e-1,2):ut.obstacles.splice(e,1),$["small"===t.type?`small-${ot.level}`:"crash"].play()):(ot.lives-=1,$.catnip.pause(),ut.cat.hasZoomies=0,ut.cat.playAnimation("dead"),ut.lives.updateText(ot.lives),0===ot.lives?(ot.over=!0,ut.message.text=dt[2],ut.credits.text=dt[7],ut.score.updateText(),ot.musicIsMuted||$[`level-${ot.level}`].pause(),$.death.play(),c()):(ut.message.updateText(dt[q(0,1)]),$["small"===t.type?`small-${ot.level}`:"crash"].play()),ot.loop.stop(),function(t,e){ot.lives>0&&ot.loop.isStopped&&setTimeout(()=>{"large"===e?ut.obstacles.splice(t-1,2):ut.obstacles.splice(t,1),ut.widget.x=nt-st,ut.widget.y=it-at,ot.loop.start()},1500)}(e,t.type)):t.x+t.width<0&&(ut.cat.isWet=!1,ut.widget.dx=ut.cat.hasZoomies?3*rt.speed:rt.speed,ot.difficultyCheck=!0,"slow"===t.type?ot.score+=1:"large"===t.type?ot.score+=5:t.type&&""!==t.type&&(ot.score+=3),ut.score.updateText(),ut.obstacles.splice(e,1))}),ot.speed=Math.min(ot.speedMax,ot.speed+75e-5),ot.difficultyCheck&&(ot.difficultyCheck=!1,ot.score>10*ot.difficulty&&(rt.thrust=Math.max(6,rt.thrust+.15),ot.difficulty+=1,ot.spawn=Math.max(ot.spawnMin,ot.spawn-ot.difficulty)))}}),document.addEventListener("keyup",t=>{const e=o[t.code];e&&e()}),window.addEventListener("focus",()=>{ot.hasFocus=!0,ot.musicIsMuted||ot.over||!ot.running?ot.musicIsMuted||ot.attract.isStopped||($.attract.loop=!0,$.attract.play()):($[`level-${ot.level}`].loop=!0,$[`level-${ot.level}`].play())}),window.addEventListener("blur",()=>{ot.hasFocus=!1,$[`level-${ot.level}`].pause(),$.attract.pause(),$.catnip.pause()})})})();